{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport matter from \"gray-matter\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport gfm from 'remark-gfm';\n\nvar CodeBlock = function CodeBlock(_ref) {\n  var language = _ref.language,\n      value = _ref.value;\n  return __jsx(SyntaxHighlighter, {\n    showLineNumbers: true,\n    language: language\n  }, value);\n};\n\nvar Page = function Page(_ref2) {\n  var content = _ref2.content,\n      _ref2$data = _ref2.data,\n      data = _ref2$data === void 0 ? {} : _ref2$data;\n  var url = window.location.href;\n  var loc = url.substring(url.lastIndexOf('/') + 1, url.length);\n  console.log(url);\n  return __jsx(React.Fragment, null, __jsx(\"div\", null, \"This is my article !\"), __jsx(\"div\", null, content === undefined && __jsx(\"h2\", null, \"\\u9519\\u8BEF\\uFF0C\\u672A\\u627E\\u5230\\uFF01\"), content !== undefined && __jsx(\"div\", null, __jsx(\"h1\", null, data.title), __jsx(\"span\", null, new Date(data.date).toLocaleDateString()), __jsx(\"article\", null, __jsx(ReactMarkdown, {\n    escapeHtml: true,\n    source: content,\n    plugins: [gfm],\n    renderers: {\n      code: CodeBlock\n    }\n  })))));\n};\n\nPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var _context$query, slug, category, _ref4, _ref4$lng, lng, fileData, _matter, data, content;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // 1. 获取 Slug\n            _context$query = context.query, slug = _context$query.slug, category = _context$query.category; // 2. 获取语言\n\n            _ref4 = context.req || {}, _ref4$lng = _ref4.lng, lng = _ref4$lng === void 0 ? \"zh-CN\" : _ref4$lng; // 3. markdown to json \n\n            _context.prev = 2;\n            _context.next = 5;\n            return import(\"../../_posts/\".concat(category, \"/\").concat(lng, \"/\").concat(slug, \".md\"));\n\n          case 5:\n            fileData = _context.sent;\n            _matter = matter(fileData[\"default\"]), data = _matter.data, content = _matter.content;\n            return _context.abrupt(\"return\", {\n              namespacesRequired: [\"common\"],\n              data: data,\n              content: content\n            });\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](2);\n            return _context.abrupt(\"return\", {\n              namespacesRequired: [\"common\"],\n              content: undefined\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 10]]);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default Page;","map":null,"metadata":{},"sourceType":"module"}