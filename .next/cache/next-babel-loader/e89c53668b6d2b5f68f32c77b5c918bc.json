{"ast":null,"code":"var _jsxFileName = \"/Users/guoqi/workspace/hello-web-/views/Post/Post.tsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport matter from \"gray-matter\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport gfm from 'remark-gfm';\n\nconst CodeBlock = ({\n  language,\n  value\n}) => {\n  return __jsx(SyntaxHighlighter, {\n    showLineNumbers: true,\n    language: language,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, value);\n};\n\nconst Page = ({\n  content,\n  data = {}\n}) => {\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, \"This is my article !\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }, content === undefined && __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 11\n    }\n  }, \"\\u9519\\u8BEF\\uFF0C\\u672A\\u627E\\u5230\\uFF01\"), content !== undefined && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }, data.title), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, new Date(data.date).toLocaleDateString()), __jsx(\"article\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, __jsx(ReactMarkdown, {\n    escapeHtml: true,\n    source: content,\n    plugins: [gfm],\n    renderers: {\n      code: CodeBlock\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 15\n    }\n  })))));\n};\n\nPage.getInitialProps = async context => {\n  // 1. 获取 Slug\n  const {\n    slug,\n    category\n  } = context.query; // 2. 获取语言\n\n  const {\n    lng = \"zh-CN\"\n  } = context.req || {}; // 3. markdown to json \n\n  try {\n    const fileData = await import(`../../_posts/${category}/${lng}/${slug}.md`);\n\n    const oembed = require('@agentofuser/remark-oembed');\n\n    const remark = require('remark');\n\n    const {\n      data,\n      content\n    } = matter(fileData.default);\n    const content2 = remark().use(oembed).processSync(fileData).result;\n    console.log(content2);\n    return {\n      namespacesRequired: [\"common\"],\n      data,\n      content\n    };\n  } catch (error) {\n    return {\n      namespacesRequired: [\"common\"],\n      content: undefined\n    };\n  }\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/guoqi/workspace/hello-web-/views/Post/Post.tsx"],"names":["React","matter","ReactMarkdown","Prism","SyntaxHighlighter","gfm","CodeBlock","language","value","Page","content","data","undefined","title","Date","date","toLocaleDateString","code","getInitialProps","context","slug","category","query","lng","req","fileData","oembed","require","remark","default","content2","use","processSync","result","console","log","namespacesRequired","error"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,KAAK,IAAIC,iBAAlB,QAA2C,0BAA3C;AACA,OAAOC,GAAP,MAAgB,YAAhB;;AAUA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,KAAyB;AACzC,SACE,MAAC,iBAAD;AAAmB,IAAA,eAAe,EAAE,IAApC;AAA0C,IAAA,QAAQ,EAAED,QAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,KADH,CADF;AAKD,CAND;;AAQA,MAAMC,IAA0B,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA,IAAI,GAAG;AAAlB,CAAD,KAA4B;AAC7D,SACE,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,OAAO,KAAKE,SAAZ,IACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAFJ,EAIGF,OAAO,KAAKE,SAAZ,IACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,IAAI,CAACE,KAAV,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAO,IAAIC,IAAJ,CAASH,IAAI,CAACI,IAAd,EAAoBC,kBAApB,EAAP,CAFF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,aAAD;AACE,IAAA,UAAU,EAAE,IADd;AAEE,IAAA,MAAM,EAAEN,OAFV;AAGE,IAAA,OAAO,EAAE,CAACL,GAAD,CAHX;AAIE,IAAA,SAAS,EAAE;AAAEY,MAAAA,IAAI,EAAEX;AAAR,KAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,CALJ,CAFF,CADF;AA0BD,CA3BD;;AA6BAG,IAAI,CAACS,eAAL,GAAuB,MAAOC,OAAP,IAAmB;AACxC;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAqBF,OAAO,CAACG,KAAnC,CAFwC,CAIxC;;AACA,QAAM;AAAEC,IAAAA,GAAG,GAAG;AAAR,MAAoBJ,OAAO,CAACK,GAAR,IAAsB,EAAhD,CALwC,CAOxC;;AACA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAM,OAAQ,gBAAeJ,QAAS,IAAGE,GAAI,IAAGH,IAAK,KAA/C,CAAvB;;AACA,UAAMM,MAAM,GAAGC,OAAO,CAAC,4BAAD,CAAtB;;AACA,UAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,UAAM;AAAEhB,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAoBT,MAAM,CAACwB,QAAQ,CAACI,OAAV,CAAhC;AAEA,UAAMC,QAAQ,GAAGF,MAAM,GACpBG,GADc,CACVL,MADU,EAEdM,WAFc,CAEFP,QAFE,EAGdQ,MAHH;AAKAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AAEA,WAAO;AACLM,MAAAA,kBAAkB,EAAE,CAAC,QAAD,CADf;AAELzB,MAAAA,IAFK;AAGLD,MAAAA;AAHK,KAAP;AAKD,GAlBD,CAkBE,OAAO2B,KAAP,EAAc;AACd,WAAO;AACLD,MAAAA,kBAAkB,EAAE,CAAC,QAAD,CADf;AAEL1B,MAAAA,OAAO,EAAEE;AAFJ,KAAP;AAID;AACF,CAhCD;;AAkCA,eAAeH,IAAf","sourcesContent":["import React from \"react\";\nimport { NextPage } from \"next\";\nimport matter from \"gray-matter\";\nimport ReactMarkdown from \"react-markdown\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport gfm from 'remark-gfm';\n\ntype Props = {\n  content: string;\n  data: {\n    title: string;\n    date: Date;\n  };\n};\n\nconst CodeBlock = ({ language, value }) => {\n  return (\n    <SyntaxHighlighter showLineNumbers={true} language={language}>\n      {value}\n    </SyntaxHighlighter>\n  );\n};\n\nconst Page: NextPage<Props, any> = ({ content, data = {} }) => {\n  return (\n    <>\n      <div>This is my article !</div>\n      <div>\n        {content === undefined && (\n          <h2>错误，未找到！</h2>\n        )}\n        {content !== undefined && (\n          <div>\n            <h1>{data.title}</h1>\n            <span>{new Date(data.date).toLocaleDateString()}\n            </span>\n            <article>\n              <ReactMarkdown\n                escapeHtml={true}\n                source={content}\n                plugins={[gfm]}\n                renderers={{ code: CodeBlock }}\n              />\n            </article>\n          </div>\n        )}\n      </div>\n\n    </>\n  );\n};\n\nPage.getInitialProps = async (context) => {\n  // 1. 获取 Slug\n  const { slug, category } = context.query;\n\n  // 2. 获取语言\n  const { lng = \"zh-CN\" } = context.req as any || {};\n\n  // 3. markdown to json \n  try {\n    const fileData = await import(`../../_posts/${category}/${lng}/${slug}.md`);\n    const oembed = require('@agentofuser/remark-oembed');\n    const remark = require('remark')\n    const { data, content } = matter(fileData.default);\n    \n    const content2 = remark()\n      .use(oembed)\n      .processSync(fileData)\n      .result\n    \n    console.log(content2)\n\n    return {\n      namespacesRequired: [\"common\"],\n      data,\n      content,\n    };\n  } catch (error) {\n    return {\n      namespacesRequired: [\"common\"],\n      content: undefined,\n    };\n  }\n};\n\nexport default Page as any;"]},"metadata":{},"sourceType":"module"}